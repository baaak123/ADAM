<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<!DOCTYPE html>
<html lang="en">

<head>
    <title>ADAM Travel</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="team" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/vegas.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">

    <!-- MAIN CSS -->
    <link rel="stylesheet" href="css/templatemo-style.css">
</head>

<body>

    <!-- PRE LOADER -->
    <section class="preloader">
        <div class="spinner">
            <span class="spinner-rotate"></span>
        </div>
    </section>

    <%- include('sidebar.ejs') %>

    <!-- HOME -->
    <section id="home">
        <div class="overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-md-12 col-sm-12">
                    <div class="home-info">
                        <h1>아직 결정하지 못하셨나요? </h1>
                        <h1>담백한 여행지 추천 받아보세요</h1>

                        <!-- You can change the date time in init.js file -->
                        <!-- Countdown를 표시할 부분 -->
                        <ul class="countdown">
                            <li>
                                <span class="hours"></span>
                                <h3>hours</h3>
                            </li>
                            <li>
                                <span class="minutes"></span>
                                <h3>minutes</h3>
                            </li>
                            <li>
                                <span class="seconds"></span>
                                <h3>seconds</h3>
                            </li>
                        </ul>

                        <script>
                            // Countdown를 현재 한국 시간으로 표시
                            $(document).ready(function () {
                                $('.countdown').koreanTime();
                            });
                        </script>

                        <div class="subscribe-form">
                            <form action="" method="get">
                                <input type="text" id="searchKeyword" class="form-control" placeholder="Enter Keyword" required="" onkeypress="handleKeyPress(event)">
                                <button type="submit" class="form-control"><i class="fa fa-mail-forward"></i></button>
                            </form>
                        </div>

                        <!-- 검색 결과를 표시할 곳 -->
                        <div id="searchResults"></div>

                        <script>
                            // 여행지 목록 가져오기
                            async function getDestinations() {
                                const response = await fetch('/destinations');
                                const destinations = await response.json();
                                const destinationList = document.getElementById('destinationList');

                                destinationList.innerHTML = destinations.map(destination => `<li>${destination.name}</li>`).join('');
                            }

                            // 검색 함수
                            async function search() {
                                const keyword = document.getElementById('searchKeyword').value;
                                const response = await fetch(`/search?keyword=${encodeURIComponent(keyword)}`);
                                const results = await response.json();
                                const searchResults = document.getElementById('searchResults');

                                searchResults.innerHTML = results.map(result => `<li>${result.name}</li>`).join('');
                            }

                            // 초기화 함수 호출
                            getDestinations();

                            // Travel 메뉴 클릭 시 게시판으로 이동
                            $('.menu a:contains("Travel")').click(function () {
                                window.location.href = "/board";
                            });
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 다른 스크립트 파일들과 함께 불러오는 부분 -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/vegas.min.js"></script>
    <script src="js/countdown.js"></script>
    <script src="js/init.js"></script>
    <script src="js/custom.js"></script>

</body>

</html>
